
<!DOCTYPE html>
<html>
  <head>
      <!-- Global Site Tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=UA-57647909-1"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments)};
        gtag('js', new Date());

        gtag('config', 'UA-57647909-1');
      </script>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Bojan Veljanovski - Feature by Folder Structure in ASP.NET MVC5</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="I write about design, development, and delivery of software." />
    <meta name="application-name" content="Bojan Veljanovski" />
    <meta name="msapplication-tooltip" content="Bojan Veljanovski" />
    <meta name="msapplication-starturl" content="/" />
    <meta property="og:title" content="Bojan Veljanovski - Feature by Folder Structure in ASP.NET MVC5" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://bojanv91.github.io/posts/2016/05/feature-folders-structure-in-asp-net" />
    <!-- TODO: More social graph meta tags -->

    <link type="application/rss+xml" rel="alternate" title="Bojan Veljanovski" href="/feed.rss" />
        <link type="application/atom+xml" rel="alternate" title="Bojan Veljanovski" href="/feed.atom" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/assets/css/bootstrap-social.css" />
    <link rel="stylesheet" href="/assets/css/main.css" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
</head>
<body>

  <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Bojan Veljanovski</a>
      </div>

      <div class="collapse navbar-collapse" id="main-navbar">
        <ul class="nav navbar-nav navbar-right">
              <li><a href="/posts">Archive</a></li>
              <li><a href="/tags">Tags</a></li>
              <li><a href="/about">About</a></li>
        </ul>
      </div>

      <div class="avatar-container">
        <div class="avatar-img-border">
          <a href="/">
            <img class="avatar-img" src="/assets/img/avatar-icon.png">
        </a>
        </div>
      </div>

    </div>
  </nav>

  
<header class="header-section">
  <div class="intro-header no-img">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          <div class="post-heading">
            <h1>Feature by Folder Structure in ASP.NET MVC5</h1>
              <span class="post-subheading">Structuring files by domain cocerns, instead of technical concerns</span>
            <span class="post-meta">
              Published on 27 May 2016
in                   <a href="/tags/#asp.net">asp.net</a>,                  <a href="/tags/#software design">software design</a>            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

<div role="main" class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

      <article role="main" class="blog-post">
        <p>Structuring your files around <strong>business concerns</strong> is more natural way of handling projects than structuring them around <strong>technical concerns</strong>. The <a href="https://en.wikipedia.org/wiki/Separation_of_concerns">Separation of Concerns</a> is applied in both approaches, but not both of them give the same desired clarity and ease for developers. This blogpost focuses on organizing MVC projects around <strong>feature folders</strong>, which represent the business concerns.<!--excerpt--></p>
<p>Most of the time developers make modifications related to a single feature (e.g. adding new fields, changing business rules, adding validation...). Structuring folders around interrelated files can make modification process simpler. The common MVC folder structure violates the rule of <em>&quot;Files that change together should be structured together&quot;</em>. Structuring by business concerns embraces this very important rule.</p>
<blockquote class="blockquote">
<p>Files that change together should be structured together.</p>
</blockquote>
<h2 id="horizontal-technical-vs.vertical-business-folder-structure">Horizontal (Technical) vs. Vertical (Business) Folder Structure</h2>
<p>On the left side you can see the common MVC structure. On the right side you can see the feature folders structure of the very same project.</p>
<pre><code>Styles
    Shared.css
    Login.css
Scripts
    Login.js
Controllers
    CoursesController.cs
    DepartmentsController.cs
    EnrollmentsController.cs
    InstructorsController.cs
    StudentsController.cs
    UsersController.cs
Models  
    CourseEditModel.cs
    CourseIndexModel.cs
    DepartmentEditModel.cs
    DepartmentIndexModel.cs
    EnrollmentEditModel.cs
    EnrollmentIndexModel.cs
    InstructorEditModel.cs
    InstructorIndexModel.cs
    StudentEditModel.cs
    StudentIndexModel.cs
    UserLoginModel.cs
    UserRegisterModel.cs
    UserForgotPasswordModel.cs
Views
    Courses
        Edit.cshtml
        Index.cshtml
    Departments
        Edit.cshtml
        Index.cshtml
    Enrollments
        Edit.cshtml
        Index.cshtml
    Instructors
        Edit.cshtml
        Index.cshtml
    Shared
        _Layout.cshtml
    Students
        Edit.cshtml
        Index.cshtml
    Users
        ForgotPassword.cshtml
        Login.cshtml
        Register.cshtml
_ViewStart.cshtml
</code></pre>
<div style=""></div>
<pre><code>Features
    Courses
        CoursesController.cs
        Edit.cs
        Edit.cshtml
        Index.cs
        Index.cshtml
    Departments
        DepartmentsController.cs
        Edit.cs
        Edit.cshtml
        Index.cs
        Index.cshtml
    Enrollments
        EnrollmentsController.cs
        Edit.cs
        Edit.cshtml
        Index.cs
        Index.cshtml
    Instructors
        InstructorsController.cs
        Edit.cs
        Edit.cshtml
        Index.cs
        Index.cshtml
    Shared
        _Layout.cshtml
        Shared.css
    Students
        StudentsController.cs
        Edit.cs
        Edit.cshtml
        Index.cs
        Index.cshtml
    Users
        UsersController.cs
        ForgotPassword.cs
        ForgotPassword.cshtml
        Login.cs
        Login.cshtml
        Login.css
        Login.js
        Register.cs
        Register.cshtml
_ViewStart.cshtml
</code></pre>
<p>When you see this in your IDE (e.g. in Visual Studio), the distinction between the files is even greater, given that there is accompanied file type icon shown besides the filename.</p>
<p>Now, imagine you scale in amount of features, in addition to the standard N-Layer stuff like repositories, services, handlers, DTOs, etc... You will soon notice that things are starting to get messy in the technical folders organization. In the feature folders organization, each feature can scale on it's own, thus much easier to manage.</p>
<p>Food for thought:</p>
<ul>
<li>What if we put our CSS and JavaScript files also in these feature folders?</li>
<li>What if one feature folder becomes so demanding on the UI that needs to be a full SPA view/module - can we structure it to use Angular?</li>
<li>Can we develop one feature UI in Angular, another one in React, all other in classic server-side MVC, and stay sane with our overall project structure?</li>
</ul>
<p>Example of single feature evolved as Angular application/module:</p>
<pre><code>Features
    ...
    ShoppingCart
        Components
            CartComponent.js
            CartComponent.css
            PaymentComponent.js
            PaymentComponent.css
            CartContainer.js
        App.js
        App.css
        Index.cshtml
        ShoppingCartController.cs
    ...
</code></pre>
<h2 id="benefits-of-using-feature-folders-over-technical-folder-structure">Benefits of using Feature Folders (over technical folder structure)</h2>
<p>Structuring your files by features (business concerns) makes things easier to find and manage.</p>
<ul>
<li>Time spent on navigation through Solution Explorer to locate interdependent files is drastically reduced since they are all in a single folder.</li>
<li>You don't step over each other toes with your peers, thus, avoid spending time on fixing merge conflicts.</li>
<li>You can scale and modify each feature on its own, independently from other features and even use different UI technology.</li>
<li>You immediately understand what an application does and where to find necessary files for your given requirement.</li>
<li>You can easily reuse similar features across projects by simply copying just a single folder.</li>
<li>You can reason much easier about each feature just by looking in a single (feature) folder.</li>
</ul>
<h2 id="implementing-feature-folders-in-asp.net-mvc-5">Implementing Feature Folders in ASP.NET MVC 5</h2>
<p>To make this work in ASP.NET MVC 5, we should inherit the <code>RazorViewEngine</code> and change the view location parts to ones that fit our new structure.</p>
<pre><code>public class FeatureFoldersRazorViewEngine : RazorViewEngine
{
    public FeatureFoldersRazorViewEngine()
    {
        var featureFolderViewLocationFormats = new[]
        {
            &quot;~/Features/{1}/{0}.cshtml&quot;,
            &quot;~/Features/{1}/{0}.vbhtml&quot;,
            &quot;~/Features/Shared/{0}.cshtml&quot;,
            &quot;~/Features/Shared/{0}.vbhtml&quot;,
        };

        ViewLocationFormats = featureFolderViewLocationFormats;
        MasterLocationFormats = featureFolderViewLocationFormats;
        PartialViewLocationFormats = featureFolderViewLocationFormats;
    }
}
</code></pre>
<p>Next, we have to add our newly created <code>FeatureFoldersRazorViewEngine</code> in our application.</p>
<pre><code>public class Global : HttpApplication
{
    void Application_Start(object sender, EventArgs e)
    {
        // ...
        ViewEngines.Engines.Clear();
        ViewEngines.Engines.Add(new FeatureFoldersRazorViewEngine());
    }
}
</code></pre>
<h2 id="summary">Summary</h2>
<p>Structuring our MVC projects following feature folders approach increases the productivity of our dev teams.</p>
<p>At our company, we have been using feature folders project structure on over dozens projects for over a year, and due to the high success and productivity boost, it became our default project structure on the presentation layer.</p>

      </article>

      <!--
      {% if page.social-share %}
        {% include social-share.html %}
      {% endif %}
      -->

      <ul class="pager blog-pager">
        <li class="previous">
          <a href="/posts/2016/05/feature-folders-structure-in-asp-net" data-toggle="tooltip" data-placement="top" title="Feature by Folder Structure in ASP.NET MVC5">&larr; Previous Post</a>
        </li>
                <li class="next">
          <a href="/posts/2016/10/global-day-of-coderetreat-2016-haselt-macedonia" data-toggle="tooltip" data-placement="top" title="Global Day of Coderetreat 2016 in Skopje, Macedonia">Next Post &rarr;</a>
        </li>
      </ul>

        <!-- COMMENTS -->
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'bojanveljanovski'; // required: replace example with your forum shortname
            var disqus_identifier = 'feature-folders-structure-in-asp-net';
            var disqus_title = 'Feature by Folder Structure in ASP.NET MVC5';
            var disqus_url = 'http://bojanv91.github.io/posts/2016/05/feature-folders-structure-in-asp-net';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();

            (function () {
                var s = document.createElement('script'); s.async = true;
                s.type = 'text/javascript';
                s.src = '//' + disqus_shortname + '.disqus.com/count.js';
                (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
            }());
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </div>
</div>


  <footer>
    <div class="container beautiful-jekyll-footer">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          <ul class="list-inline text-center footer-links">
            <li>
              <a href="https://github.com/bojanv91" title="GitHub">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
            <li>
              <a href="https://twitter.com/bojanv91" title="Twitter">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          </ul>
          <p class="copyright text-muted">
            © Bojan Veljanovski • 2018 <br/>
            <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
            |
            <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
            <br />
            <br />
            Theme ported from <a href="http://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
            <br />
            Blog generated by <a href="https://wyam.io">Wyam.io</a>
          </p>
        </div>
      </div>
    </div>
  </footer>


  <script src="/assets/js/jquery-1.11.2.min.js"></script>
  <script src="/assets/js/bootstrap.min.js"></script>
  <script src="/assets/js/main.js"></script>
</body>
</html>
